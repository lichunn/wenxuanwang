"use strict";jQuery(function(m){var n=m("#uname"),e=m("#upwd"),o=m("#denglu"),t=m("#show"),a=!1,r=!1,l=!1;i(),n.on("blur",function(){""==n.val()?(t.html("不能为空").css({color:"red","font-size":"14"}),r=!1,i()):(t.html(""),r=!0)}),e.on("blur",function(){""==e.val()?(e.next().html("不能为空").css({color:"red","font-size":"14"}),l=!1,i()):(e.next().html(""),l=!0)});var c=[];function i(){r&&l&&a?o.prop("disabled",!1).css("background","red"):o.prop("disabled",!0).css("background","#ccc")}function h(o){var t=m("#canvas").width(),a=m("#canvas").height(),n=document.getElementById("canvas"),e=n.getContext("2d");n.width=t,n.height=a;for(var r="a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=r.length,c=0;c<4;c++){var i=Math.floor(Math.random()*l),h=Math.random()-.5,s=r[i];o[c]=s.toLowerCase();var d=10+20*c,u=20+8*Math.random();e.font="bold 23px 微软雅黑",e.translate(d,u),e.rotate(h),e.fillStyle=f(),e.fillText(s,0,0),e.rotate(-h),e.translate(-d,-u)}for(c=0;c<=5;c++)e.strokeStyle=f(),e.beginPath(),e.moveTo(Math.random()*t,Math.random()*a),e.lineTo(Math.random()*t,Math.random()*a),e.stroke();for(c=0;c<=30;c++){e.strokeStyle=f(),e.beginPath();d=Math.random()*t,u=Math.random()*a;e.moveTo(d,u),e.lineTo(d+1,u+1),e.stroke()}}function f(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}h(c),m("#canvas").on("click",function(){h(c)}),m(".input-val").on("blur",function(){var o=m(".input-val").val().toLowerCase(),t=c.join("");a=""==o?(m(".show").html("请输入验证码 ").css("color","red"),!1):o==t?(m(".show").html("验证码正确 ").css("color","green"),!0):(m(".show").html("验证码错误！请重新输入！ ").css("color","red"),m(".input-val").val(""),!1),i()}),o.on("click",function(o){document.cookie="";var t=n.val(),a=e.val();o.preventDefault(),m.get("./api/denglu.php?uname="+t+"&upwd="+a,function(o){"登录成功"==o?(Cookie.setCookie("uname",t,"","/"),Cookie.setCookie("upwd",a,"","/"),location.href="./index.html"):alert("该用户不存在")})})});