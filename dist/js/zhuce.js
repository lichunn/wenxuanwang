"use strict";jQuery(function(m){var t=m("#uname"),a=m("#upwd"),o=m("#zhuce"),n=m("#show"),e=!1,r=!1,l=!1;s(),t.on("blur",function(){var o=t.val();/^[\D\S][\S]{1,11}$/.test(o)?m.get("./api/search.php?uname="+o,function(o){var t=o;console.log(o),e=1==t?(n.html("用户名可用").css("color","#58bc58"),!0):(n.html("用户名重复").css("color","red"),!1)},"json"):(n.html("不能为空，限制2-12位"),n.css({color:"red","font-size":"14"}),e=!1),s()}),a.on("blur",function(){r=/^[a-z]\w{1,11}$/.test(a.val())?(a.next().html("密码格式正确").css("color","#58bc58"),!0):(a.next().html("密码应以字母开头，2-12位").css({color:"red","font-size":"14"}),!1),s()});var c=[];function s(){e&&r&&l?o.prop("disabled",!1).css("background","red"):o.prop("disabled",!0).css("background","#ccc")}function h(o){var t=m("#canvas").width(),a=m("#canvas").height(),n=document.getElementById("canvas"),e=n.getContext("2d");n.width=t,n.height=a;for(var r="a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),l=r.length,c=0;c<4;c++){var s=Math.floor(Math.random()*l),h=Math.random()-.5,i=r[s];o[c]=i.toLowerCase();var d=10+20*c,u=20+8*Math.random();e.font="bold 23px 微软雅黑",e.translate(d,u),e.rotate(h),e.fillStyle=v(),e.fillText(i,0,0),e.rotate(-h),e.translate(-d,-u)}for(c=0;c<=5;c++)e.strokeStyle=v(),e.beginPath(),e.moveTo(Math.random()*t,Math.random()*a),e.lineTo(Math.random()*t,Math.random()*a),e.stroke();for(c=0;c<=30;c++){e.strokeStyle=v(),e.beginPath();d=Math.random()*t,u=Math.random()*a;e.moveTo(d,u),e.lineTo(d+1,u+1),e.stroke()}}function v(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}h(c),m("#canvas").on("click",function(){h(c)}),m(".input-val").on("blur",function(){var o=m(".input-val").val().toLowerCase(),t=c.join("");l=""==o?(m(".show").html("请输入验证码 ").css("color","red"),!1):o==t?(m(".show").html("验证码正确 ").css("color","green"),!0):(m(".show").html("验证码错误！请重新输入！ ").css("color","red"),m(".input-val").val(""),!1),s()}),o.on("click",function(o){o.preventDefault(),m.get("./api/zhuce.php?uname="+t.val()+"&upwd="+a.val(),function(o){"注册成功"==o&&(Cookie.setCookie("uname",t.val(),"","/"),Cookie.setCookie("upwd",a.val(),"","/"),location.href="index.html")})})});